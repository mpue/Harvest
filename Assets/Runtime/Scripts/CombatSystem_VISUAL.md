# Combat System - Visual Overview ??

## ?? System Architecture

```
???????????????????????????????????????????????????????????????
?   COMBAT SYSTEM        ?
???????????????????????????????????????????????????????????????
          ?
      ???????????????????????????????????????????
        ?           ?       ?
 ???????????        ???????????????   ??????????????
   ? Health  ?        ?  HealthBar  ?  ? Explosion  ?
   ?Component?        ?  Component  ?     ? Component  ?
   ???????????   ???????????????     ??????????????
        ?       ?            ?
        ?     ?    ?
   • Damage            • Visual Display     • Area Damage
   • Healing           • Auto-Follow    • Physics Force
   • Regeneration    • Color Coding     • Visual FX
   • Death Events  • Fade In/Out        • Audio FX
   • Audio  • Camera Face   • Auto-Destroy
   • Visual Flash      • Smooth Transitions ?
```

## ?? Component Interaction Flow

```
????????????????
?  Projectile  ?
?   Hits Unit  ?
????????????????
       ?
     ?
????????????????????????????????????????????
?      Health.TakeDamage()         ?
?  • Reduce currentHealth          ?
?  • Play hit sound (random from array)    ?
?  • Trigger hit flash effect       ?
?  • Fire OnDamaged event        ?
?  • Fire OnHealthChanged event     ?
????????????????????????????????????????????
     ?
       ???????????????????
       ?        ?
       ?          ?
????????????????  ????????????????
?  HealthBar   ?  ? Check Death  ?
?   Updates    ?  ????????????????
????????????????       ?
             ? If HP <= 0
           ?
        ??????????????????????????????????
     ?       Health.Die()         ?
        ? • Play death sound (random)    ?
     ? • Spawn explosion     ?
      ? • Disable components           ?
        ? • Fire OnDeath event        ?
        ? • Destroy/Disable gameObject   ?
        ??????????????????????????????????
```

## ?? Health Component States

```
???????????????????????????????????????????????????????
?  ALIVE STATE     ?
?      ?
?  currentHealth > 0            ?
?  • Can take damage  ?
?  • Can be healed       ?
?  • Regeneration active (if enabled) ?
?  • Fires OnHealthChanged events        ?
?               ?
?  ???????????????????????????????????????   ?
?  ?  FULL HEALTH (100%)        ? ?
?  ?  • Green healthbar                ?          ?
?  ?  • HealthBar hidden (if configured) ?   ?
?  ?  • No regeneration needed           ? ?
?  ???????????????????????????????????????          ?
?           ?       ?
?  ?????????????????????????????????????       ?
?  ?  MID HEALTH (50-100%)   ?       ?
?  ?  • Yellow healthbar  ?            ?
?  ?  • HealthBar visible              ?            ?
?  ?  • Regeneration active  ? ?
?  ?????????????????????????????????????  ?
?     ?       ?
?  ?????????????????????????????????????       ?
?  ?  LOW HEALTH (0-50%)    ?       ?
?  ?  • Red healthbar       ?            ?
?  ?  • HealthBar visible   ?            ?
?  ?  • Regeneration active        ?     ?
?  ?  • Visual warnings (optional)  ?            ?
?  ?????????????????????????????????????            ?
?    ?         ?
???????????????????????????????????????????????????????
            ? currentHealth reaches 0
   ?
???????????????????????????????????????????????????????
?             DEAD STATE     ?
?         ?
?  currentHealth = 0       ?
?  isDead = true             ?
?  • Cannot take damage      ?
?  • Cannot be healed          ?
?  • Death sound plays           ?
?  • Explosion spawns           ?
?  • Components disabled            ?
?  • GameObject destroyed/disabled     ?
?  • OnDeath event fired    ?
???????????????????????????????????????????????????????
```

## ?? Explosion Damage Flow

```
        ????????????????
  ?  Unit Dies   ?
     ????????????????
               ?
         ?
     ????????????????????
     ? Spawn Explosion  ?
     ?   at position    ?
   ????????????????????
     ?
  ?????????????
?    ?
      ?       ?
????????????? ??????????????
?  Visual   ? ?   Damage   ?
?  Effects  ? ?   Sphere   ?
????????????? ??????????????
? Particles ?    ?
? Light     ?       ?
? Sound     ?  ????????????????????
?????????????  ? Find all units   ?
               ? in damage radius ?
       ????????????????????
      ?
          ?????????????????????????????
          ?    ?             ?
  ?   ?  ?
    ???????????   ???????????  ???????????
    ? Unit A  ?   ? Unit B  ?  ? Unit C  ?
    ???????????   ???????????  ???????????
         ?             ?         ?
         ?        ?             ?
    Calculate     Calculate     Calculate
    Distance      Distance    Distance
         ?   ?             ?
    Apply         Apply       Apply
    Falloff       Falloff       Falloff
         ?    ?    ?
  ?             ?  ?
    Damage Damage        Damage
    50 DMG    30 DMG        10 DMG
    (center)      (mid)   (edge)
```

## ?? HealthBar Visual States

```
???????????????????????????????????????????????????
? HEALTHBAR APPEARANCE        ?
???????????????????????????????????????????????????

FULL HEALTH (100%):
????????????????????????????????????????
??????????????????????????????????????  GREEN
????????????????????????????????????????
• Hidden (if hideWhenFull = true)
• Fully visible green bar


MID HEALTH (50%):
????????????????????????????????????????
??????????????????????????????????????  YELLOW
????????????????????????????????????????
• Always visible
• Yellow color
• Smooth transition


LOW HEALTH (25%):
????????????????????????????????????????
??????????????????????????????????????  RED
????????????????????????????????????????
• Always visible
• Red color (warning!)
• Smooth transition


DEAD (0%):
????????????????????????????????????????
??????????????????????????????????????  EMPTY
????????????????????????????????????????
• Fades out
• Unit dies
```

## ?? Audio System

```
???????????????????????????????????????????
?       AUDIO EVENTS    ?
???????????????????????????????????????????

HIT SOUND:
• Triggered: On TakeDamage()
• Source: Unit's AudioSource
• Randomized: Pick from hitSounds array
• 3D Spatial audio
?
???????????????
? HitSound1   ? ??
? HitSound2   ? ???? Random.Range(0, length)
? HitSound3   ? ??
???????????????


DEATH SOUND:
• Triggered: On Die()
• Source: Temporary AudioSource
• Randomized: Pick from deathSounds array
• Survives unit destruction
?
???????????????
? DeathSound1 ? ??
? DeathSound2 ? ???? Random.Range(0, length)
??????????????? ??


EXPLOSION SOUND:
• Triggered: Explosion.Start()
• Source: AudioSource.PlayClipAtPoint()
• Single clip
• 3D Spatial audio
```

## ?? Component Dependencies

```
???????????????????????????????????????????????
?           REQUIRED COMPONENTS   ?
???????????????????????????????????????????????

HEALTH:
? Standalone - No dependencies
?? Works alone

HEALTHBAR:
? Health component (auto-found)
?? Parent or same GameObject

HEALTHBARSETUP:
? Health component (required)
?? Same GameObject

EXPLOSION:
? No dependencies
? Optional TeamComponent
?? For friendly fire prevention


???????????????????????????????????????????????
?  RECOMMENDED SETUP           ?
???????????????????????????????????????????????

Minimal Combat Unit:
• BaseUnit
• TeamComponent
• Health

Complete Combat Unit:
• BaseUnit
• TeamComponent
• Health
• HealthBarSetup
• Collider
• (Optional) WeaponController
• (Optional) Controllable
```

## ?? Default Values Reference

```
????????????????????????????????????????????
?         HEALTH DEFAULTS  ?
????????????????????????????????????????????
? Max Health:  100    ?
? Can Regenerate:   false    ?
? Regeneration Rate:    5 HP/sec      ?
? Regeneration Delay:   3 seconds     ?
? Destroy On Death:     true    ?
? Destroy Delay:   2 seconds          ?
? Flash On Hit:         true         ?
? Hit Flash Duration:   0.1 seconds        ?
? Audio Volume:    1.0       ?
????????????????????????????????????????????

????????????????????????????????????????????
?      HEALTHBAR DEFAULTS        ?
????????????????????????????????????????????
? Offset:               (0, 2, 0)        ?
? Size:  (1, 0.1)           ?
? Hide When Full:       true    ?
? Always Face Camera:   true?
? Smooth Transition:    true    ?
? Transition Speed:     5.0                ?
? Full Health Color:    Green              ?
? Mid Health Color:     Yellow   ?
? Low Health Color:   Red                ?
? Mid Threshold:        0.5 (50%)      ?
? Low Threshold:        0.25 (25%)         ?
????????????????????????????????????????????

????????????????????????????????????????????
?    EXPLOSION DEFAULTS          ?
????????????????????????????????????????????
? Deals Damage: true       ?
? Damage Amount:        50              ?
? Damage Radius:  5 units        ?
? Apply Force:   true        ?
? Explosion Force:      500       ?
? Light Fade Duration:  0.5 seconds        ?
? Lifetime:  5 seconds          ?
????????????????????????????????????????????
```

## ?? Timeline Example

```
TIME: 0.0s
Unit has 100/100 HP
HealthBar: Hidden (full health)
State: Idle

TIME: 1.0s
Projectile hits ? TakeDamage(30)
Unit has 70/100 HP
HealthBar: Visible, YELLOW
Effect: Red flash (0.1s)
Audio: "HitSound2.wav" plays
State: Damaged

TIME: 1.5s
Projectile hits ? TakeDamage(40)
Unit has 30/100 HP
HealthBar: Visible, YELLOW?RED transition
Effect: Red flash (0.1s)
Audio: "HitSound1.wav" plays
State: Low Health

TIME: 2.0s
Projectile hits ? TakeDamage(35)
Unit has 0/100 HP
HealthBar: Fades out
Effect: Death flash
Audio: "DeathSound1.wav" plays
Event: OnDeath fired
State: Dead

TIME: 2.1s
Explosion spawns at unit position
Effect: Particles + Light
Audio: "ExplosionSound.wav" plays
Damage: Nearby enemies in 5m radius
State: Exploding

TIME: 4.0s
Unit GameObject destroyed
(Destroy Delay elapsed)
State: Removed from scene
```

---

**?? Visual System Complete!**

Alle Komponenten arbeiten nahtlos zusammen für ein vollständiges Combat-Erlebnis!
